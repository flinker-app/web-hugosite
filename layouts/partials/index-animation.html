<div class="fi-graphic fi-fade-up">
	<svg class="fi-svg" viewBox="0 0 960 360" aria-labelledby="fiTitle fiDesc" xmlns="http://www.w3.org/2000/svg">
		<title id="fiTitle">Flinker openBIM Layer</title>
		<desc id="fiDesc">Diagram showing how Flinker connects openBIM formats (IFC, BCF, IDS, COBie) to Microsoft 365 apps (SharePoint, Teams, Power BI, Power Automate)</desc>
		<defs>
			<!-- Gradients for enhanced visuals -->
			<linearGradient id="fiCenterGrad" x1="0%" y1="0%" x2="100%" y2="100%">
				<stop offset="0%" style="stop-color:#0078D4;stop-opacity:0.15"/>
				<stop offset="100%" style="stop-color:#0078D4;stop-opacity:0.05"/>
			</linearGradient>
			<linearGradient id="fiAccentGrad" x1="0%" y1="0%" x2="0%" y2="100%">
				<stop offset="0%" style="stop-color:#0078D4"/>
				<stop offset="100%" style="stop-color:#005a9e"/>
			</linearGradient>
			<linearGradient id="fiCardDarkGrad" x1="0%" y1="0%" x2="100%" y2="100%">
				<stop offset="0%" style="stop-color:#2D3748"/>
				<stop offset="100%" style="stop-color:#1A202C"/>
			</linearGradient>
			<!-- Glow filter for center -->
			<filter id="fiGlow" x="-50%" y="-50%" width="200%" height="200%">
				<feGaussianBlur stdDeviation="3" result="blur"/>
				<feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge>
			</filter>
			<!-- Shadow for cards -->
			<filter id="fiShadow" x="-10%" y="-10%" width="120%" height="140%">
				<feDropShadow dx="0" dy="2" stdDeviation="3" flood-opacity="0.08"/>
			</filter>
		</defs>

		<!-- Left: OpenBIM / Inputs -->
		<g class="fi-float">
			<!-- Card 1: IFC -->
			<g class="fi-card" transform="translate(40,30)" filter="url(#fiShadow)">
				<rect class="fi-card-bg" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<g transform="translate(14,14)">
					<rect x="0" y="0" width="28" height="28" rx="7" class="fi-ic-bg"/>
					<!-- 3D Cube icon for IFC -->
					<g transform="translate(14,14)">
						<path d="M0 -8 L8 -4 L8 4 L0 8 L-8 4 L-8 -4 Z" class="fi-ic-fill-light"/>
						<path d="M0 -8 L8 -4 L0 0 L-8 -4 Z" class="fi-ic-fill"/>
						<path d="M0 0 L8 -4 L8 4 L0 8 Z" class="fi-ic-fill-mid"/>
						<path d="M0 0 L-8 -4 L-8 4 L0 8 Z" class="fi-ic-fill-dark"/>
					</g>
				</g>
				<text class="fi-card-title" x="54" y="24">IFC Models</text>
				<text class="fi-card-sub" x="54" y="40">Geometry + Properties</text>
				<text class="fi-card-badge" x="186" y="28">3D</text>
			</g>

			<!-- Card 2: BCF -->
			<g class="fi-card" transform="translate(40,98)" filter="url(#fiShadow)">
				<rect class="fi-card-bg" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<g transform="translate(14,14)">
					<rect x="0" y="0" width="28" height="28" rx="7" class="fi-ic-bg"/>
					<!-- Chat bubble icon for BCF -->
					<g transform="translate(14,14)">
						<path d="M-8 -5 C-8 -7.5 -6 -9 -3.5 -9 H3.5 C6 -9 8 -7.5 8 -5 V2 C8 4.5 6 6 3.5 6 H-2 L-6 9 V6 H-3.5 C-6 6 -8 4.5 -8 2 Z" class="fi-ic-stroke" fill="none" stroke-width="1.8"/>
						<circle cx="-3" cy="-1.5" r="1.3" class="fi-ic-fill"/>
						<circle cx="0" cy="-1.5" r="1.3" class="fi-ic-fill"/>
						<circle cx="3" cy="-1.5" r="1.3" class="fi-ic-fill"/>
					</g>
				</g>
				<text class="fi-card-title" x="54" y="24">BCF Issues</text>
				<text class="fi-card-sub" x="54" y="40">Topics + Viewpoints</text>
			</g>

			<!-- Card 3: IDS -->
			<g class="fi-card" transform="translate(40,166)" filter="url(#fiShadow)">
				<rect class="fi-card-bg" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<g transform="translate(14,14)">
					<rect x="0" y="0" width="28" height="28" rx="7" class="fi-ic-bg"/>
					<!-- Checklist icon for IDS -->
					<g transform="translate(14,14)">
						<path d="M-6 -6 H6 M-6 0 H3 M-6 6 H6" class="fi-ic-stroke" fill="none" stroke-width="1.8"/>
						<path d="M4 -1 L5.5 0.5 L8 -3" class="fi-ic-check" fill="none" stroke-width="2"/>
					</g>
				</g>
				<text class="fi-card-title" x="54" y="24">IDS Rules</text>
				<text class="fi-card-sub" x="54" y="40">Requirements + QA</text>
				<circle cx="190" cy="28" r="4" class="fi-status-ok"/>
			</g>

			<!-- Card 4: COBie -->
			<g class="fi-card" transform="translate(40,234)" filter="url(#fiShadow)">
				<rect class="fi-card-bg" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<g transform="translate(14,14)">
					<rect x="0" y="0" width="28" height="28" rx="7" class="fi-ic-bg"/>
					<!-- Table/spreadsheet icon for COBie -->
					<g transform="translate(14,14)">
						<rect x="-7" y="-7" width="14" height="14" rx="2" class="fi-ic-stroke" fill="none" stroke-width="1.6"/>
						<path d="M-7 -2 H7 M-7 3 H7 M-2 -7 V7 M3 -7 V7" class="fi-ic-stroke" fill="none" stroke-width="1.2"/>
					</g>
				</g>
				<text class="fi-card-title" x="54" y="24">COBie Data</text>
				<text class="fi-card-sub" x="54" y="40">Assets + Handover</text>
			</g>
		</g>

		<!-- Center: Flinker openBIM Layer -->
		<g class="fi-center">
			<!-- Outer glow ring -->
			<circle cx="480" cy="180" r="90" class="fi-center-glow"/>
			<circle cx="480" cy="180" r="82" class="fi-center-ring"/>
			<circle cx="480" cy="180" r="66" fill="url(#fiCenterGrad)" class="fi-center-core"/>
			<circle cx="480" cy="180" r="66" class="fi-center-core-stroke"/>

			<!-- rotating orbit ring -->
			<g class="fi-orbit" filter="url(#fiGlow)">
				<circle cx="480" cy="180" r="82" class="fi-orbit-stroke"/>
				<circle cx="562" cy="180" r="5" class="fi-orbit-dot"/>
				<circle cx="398" cy="180" r="4" class="fi-orbit-dot2"/>
			</g>

			<text class="fi-center-title" x="480" y="176" text-anchor="middle">openBIM Layer</text>
			<text class="fi-center-sub" x="480" y="194" text-anchor="middle">for Microsoft 365</text>

			<!-- pills: apps -->
			<g class="fi-pills">
				<g transform="translate(370,266)">
					<rect x="0" y="0" width="220" height="26" rx="13" class="fi-pill"/>
					<circle cx="16" cy="13" r="4" fill="#0078D4" opacity="0.6"/>
					<circle cx="28" cy="13" r="4" fill="#0078D4" opacity="0.4"/>
					<circle cx="40" cy="13" r="4" fill="#0078D4" opacity="0.2"/>
					<text x="118" y="17" text-anchor="middle" class="fi-pill-text">IFC Viewer · BCF Manager · CDE</text>
				</g>
			</g>
		</g>

		<!-- Right: Microsoft Apps -->
		<g class="fi-float-delayed">
			<!-- SharePoint -->
			<g class="fi-card fi-card-dark" transform="translate(710,30)">
				<rect fill="url(#fiCardDarkGrad)" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<rect class="fi-card-bg-dark" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<!-- SharePoint icon -->
				<g transform="translate(18,28)">
					<circle cx="0" cy="0" r="8" fill="#036C70"/>
					<circle cx="6" cy="-4" r="6" fill="#1A9BA1"/>
					<circle cx="10" cy="2" r="5" fill="#37C6D0"/>
					<text x="0" y="3" text-anchor="middle" fill="#fff" style="font:bold 7px system-ui">S</text>
				</g>
				<text class="fi-card-title-dark" x="40" y="24">SharePoint</text>
				<text class="fi-card-sub-dark" x="40" y="40">CDE + Data Store</text>
				<g transform="translate(148,20)">
					<rect x="0" y="0" width="44" height="8" rx="4" class="fi-meter"/>
					<rect x="0" y="0" width="28" height="8" rx="4" class="fi-meter-fill fi-pulse"/>
				</g>
			</g>

			<!-- Teams -->
			<g class="fi-card fi-card-dark" transform="translate(710,98)">
				<rect fill="url(#fiCardDarkGrad)" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<rect class="fi-card-bg-dark" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<!-- Teams icon -->
				<g transform="translate(18,28)">
					<rect x="-8" y="-8" width="16" height="16" rx="3" fill="#5059C9"/>
					<circle cx="5" cy="-5" r="4" fill="#7B83EB"/>
					<path d="M-5 -3 V3 H-2 V-1 H1 V3 H4 V-3 Z" fill="#fff"/>
					<circle cx="8" cy="3" r="3" fill="#7B83EB"/>
				</g>
				<text class="fi-card-title-dark" x="40" y="24">Teams</text>
				<text class="fi-card-sub-dark" x="40" y="40">Collaboration</text>
				<g transform="translate(152,16)">
					<circle cx="0" cy="10" r="9" class="fi-avatar"/>
					<circle cx="16" cy="10" r="9" class="fi-avatar"/>
					<circle cx="32" cy="10" r="9" class="fi-avatar"/>
					<text x="0" y="13" text-anchor="middle" fill="#9CA3AF" style="font:600 8px system-ui">M</text>
					<text x="16" y="13" text-anchor="middle" fill="#9CA3AF" style="font:600 8px system-ui">J</text>
					<text x="32" y="13" text-anchor="middle" fill="#9CA3AF" style="font:600 8px system-ui">+3</text>
				</g>
			</g>

			<!-- Power BI -->
			<g class="fi-card fi-card-dark" transform="translate(710,166)">
				<rect fill="url(#fiCardDarkGrad)" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<rect class="fi-card-bg-dark" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<!-- Power BI icon -->
				<g transform="translate(18,28)">
					<rect x="-8" y="-8" width="16" height="16" rx="2" fill="#F2C811"/>
					<rect x="-6" y="0" width="4" height="6" rx="1" fill="#E8A500"/>
					<rect x="-1" y="-3" width="4" height="9" rx="1" fill="#C79500"/>
					<rect x="4" y="-6" width="4" height="12" rx="1" fill="#A37F00"/>
				</g>
				<text class="fi-card-title-dark" x="40" y="24">Power BI</text>
				<text class="fi-card-sub-dark" x="40" y="40">Dashboards + 3D</text>
				<g transform="translate(148,14)">
					<rect x="0" y="22" width="10" height="12" rx="2" class="fi-bar fi-pulse"/>
					<rect x="14" y="14" width="10" height="20" rx="2" class="fi-bar fi-pulse" style="animation-delay:-0.8s"/>
					<rect x="28" y="6" width="10" height="28" rx="2" class="fi-bar fi-pulse" style="animation-delay:-1.6s"/>
				</g>
			</g>

			<!-- Power Automate -->
			<g class="fi-card fi-card-dark" transform="translate(710,234)">
				<rect fill="url(#fiCardDarkGrad)" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<rect class="fi-card-bg-dark" x="0" y="0" rx="14" ry="14" width="210" height="56"/>
				<!-- Power Automate icon -->
				<g transform="translate(18,28)">
					<rect x="-8" y="-8" width="16" height="16" rx="2" fill="#0066FF"/>
					<path d="M-4 -4 L2 -4 L-1 0 L3 0 L-3 6 L0 1 L-4 1 Z" fill="#fff"/>
				</g>
				<text class="fi-card-title-dark" x="40" y="24">Power Automate</text>
				<text class="fi-card-sub-dark" x="40" y="40">Workflows</text>
				<g transform="translate(154,18)">
					<path d="M0 10 C12 -4, 28 -4, 40 10" class="fi-loop-path" fill="none"/>
					<path d="M0 10 C12 24, 28 24, 40 10" class="fi-loop-path" fill="none"/>
					<circle cx="0" cy="10" r="3.5" class="fi-loop-dot fi-pulse"/>
					<circle cx="40" cy="10" r="3.5" class="fi-loop-dot fi-pulse" style="animation-delay:-1.3s"/>
				</g>
			</g>
		</g>

		<!-- Connections (dashed “data flow”) -->
		<g class="fi-connections">
			<!-- left -> center (smoother curves) -->
			<path id="fiL1" d="M250 58 Q320 58, 360 100 T398 155" class="fi-conn"/>
			<path id="fiL2" d="M250 126 Q320 126, 360 150 T398 175" class="fi-conn" style="animation-delay:-0.6s"/>
			<path id="fiL3" d="M250 194 Q320 194, 360 190 T398 185" class="fi-conn" style="animation-delay:-1.2s"/>
			<path id="fiL4" d="M250 262 Q320 262, 360 230 T398 205" class="fi-conn" style="animation-delay:-1.8s"/>

			<!-- center -> right (smoother curves) -->
			<path id="fiR1" d="M562 155 Q600 120, 650 80 T710 58" class="fi-conn" style="animation-delay:-0.3s"/>
			<path id="fiR2" d="M562 175 Q600 155, 650 140 T710 126" class="fi-conn" style="animation-delay:-0.9s"/>
			<path id="fiR3" d="M562 185 Q600 190, 650 195 T710 194" class="fi-conn" style="animation-delay:-1.5s"/>
			<path id="fiR4" d="M562 205 Q600 240, 650 255 T710 262" class="fi-conn" style="animation-delay:-2.1s"/>

			<!-- static nodes with better positioning -->
			<circle cx="310" cy="58" r="4" class="fi-node fi-pulse"/>
			<circle cx="325" cy="194" r="4" class="fi-node fi-pulse" style="animation-delay:-1s"/>
			<circle cx="650" cy="126" r="4" class="fi-node fi-pulse" style="animation-delay:-0.5s"/>
			<circle cx="645" cy="262" r="4" class="fi-node fi-pulse" style="animation-delay:-1.5s"/>

			<!-- moving dots (optional; graceful fallback if offset-path unsupported) -->
			<circle class="fi-dot fi-dot-l1" r="4" />
			<circle class="fi-dot fi-dot-l2" r="4" />
			<circle class="fi-dot fi-dot-r1" r="4" />
			<circle class="fi-dot fi-dot-r2" r="4" />
		</g>
	</svg>
</div>

<style>
	/* Wrapper */
	.fi-graphic{
		max-width: 1320px;
		width: 100%;
		margin: 0 auto;
		/* scoped variables */
		--fi-accent: #0078D4;      /* Flinker blue */
		--fi-ink: #111827;         /* near-slate */
		--fi-muted: #6B7280;
		--fi-line: #E5E7EB;
		--fi-card: #FFFFFF;
		--fi-dark: #1F2937;
		--fi-dark2: #374151;

		--fi-ms-blue: #3B82F6;
		--fi-ms-green: #10B981;
		--fi-ms-amber: #F59E0B;
		--fi-ms-purple:#6366F1;
	}

	.fi-svg{ width:100%; height:auto; display:block; }

	/* Base text styles (SVG) */
	.fi-card-title{ font: 600 12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: var(--fi-ink); }
	.fi-card-sub{ font: 500 10px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: var(--fi-muted); }
	.fi-card-badge{ font: 700 8px/1 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: var(--fi-accent); }

	.fi-card-title-dark{ font: 700 12px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: #fff; }
	.fi-card-sub-dark{ font: 500 10px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: #9CA3AF; }

	.fi-center-title{ font: 800 13px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: var(--fi-ink); letter-spacing: .3px; }
	.fi-center-sub{ font: 500 10px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: var(--fi-muted); }
	.fi-center-brand{ font: 500 9px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: var(--fi-accent); }

	/* Cards */
	.fi-card-bg{
		fill: var(--fi-card);
		stroke: var(--fi-line);
		stroke-width: 1.5;
	}
	.fi-card-bg-dark{
		fill: transparent;
		stroke: rgba(255,255,255,.12);
		stroke-width: 1.2;
	}

	/* Enhanced icons */
	.fi-ic-bg{ fill: rgba(0,120,212,.12); }
	.fi-ic-stroke{
		stroke: var(--fi-accent);
		stroke-width: 1.6;
		stroke-linecap: round;
		stroke-linejoin: round;
	}
	.fi-ic-fill{ fill: var(--fi-accent); }
	.fi-ic-fill-light{ fill: rgba(0,120,212,.15); }
	.fi-ic-fill-mid{ fill: rgba(0,120,212,.55); }
	.fi-ic-fill-dark{ fill: rgba(0,120,212,.35); }
	.fi-ic-check{ stroke: #10B981; stroke-linecap: round; stroke-linejoin: round; }
	.fi-status-ok{ fill: #10B981; }

	/* Center */
	.fi-center-glow{ fill: none; stroke: rgba(0,120,212,.15); stroke-width: 16; }
	.fi-center-ring{ fill: #fff; stroke: var(--fi-ink); stroke-width: 2.5; }
	.fi-center-core-stroke{ fill: none; stroke: rgba(0,120,212,.3); stroke-width: 2; }

	.fi-pill{ fill: rgba(0,120,212,.08); stroke: rgba(0,120,212,.2); stroke-width: 1; }
	.fi-pill-text{ font: 600 9px/1.2 system-ui, -apple-system, Segoe UI, Roboto, Arial; fill: var(--fi-ink); }

	/* Orbit ring */
	.fi-orbit{ transform-origin: 480px 180px; animation: fi-rotate 10s linear infinite; }
	.fi-orbit-stroke{
		fill: none;
		stroke: rgba(0,120,212,.4);
		stroke-width: 1.8;
		stroke-dasharray: 4 8;
	}
	.fi-orbit-dot{ fill: var(--fi-accent); }
	.fi-orbit-dot2{ fill: var(--fi-accent); opacity: .5; }

	/* Right-side mini visuals */
	.fi-meter{ fill: var(--fi-dark2); }
	.fi-meter-fill{ fill: var(--fi-ms-blue); }
	.fi-meter-label{ font: 600 7px system-ui; fill: #9CA3AF; }

	.fi-avatar{ fill: var(--fi-dark2); stroke: rgba(255,255,255,.1); stroke-width: 1; }
	.fi-bar{ fill: var(--fi-ms-amber); }
	.fi-loop-path{ stroke: rgba(0,120,212,.4); stroke-width: 1.5; stroke-dasharray: 3 3; }
	.fi-loop-dot{ fill: var(--fi-accent); }

	/* Connections */
	.fi-conn{
		fill: none;
		stroke: var(--fi-line);
		stroke-width: 1.8;
		stroke-dasharray: 8 6;
		vector-effect: non-scaling-stroke;
		animation: fi-dash 3s linear infinite;
	}
	.fi-node{ fill: var(--fi-accent); transform-box: fill-box; transform-origin: center; }
	.fi-dot{ fill: var(--fi-accent); }

	/* --- Animations --- */
	.fi-fade-up{
		opacity: 0;
		transform: translate3d(0,18px,0);
		animation: fi-fade-up 800ms cubic-bezier(.2,.8,.2,1) forwards;
	}

	.fi-float{ animation: fi-float 5s ease-in-out infinite; }
	.fi-float-delayed{ animation: fi-float 5s ease-in-out infinite; animation-delay: -1.6s; }

	.fi-pulse{
		transform-box: fill-box;
		transform-origin: center;
		animation: fi-pulse 2.8s ease-in-out infinite;
	}

	/* Dash movement = "data flow" */
	@keyframes fi-dash{
		to { stroke-dashoffset: -56; }
	}

	/* Floating */
	@keyframes fi-float{
		0%,100% { transform: translateY(0); }
		50%     { transform: translateY(-8px); }
	}
	/* Pulse */
	@keyframes fi-pulse{
		0%,100% { opacity: .35; transform: scale(1); }
		50%     { opacity: 1; transform: scale(1.25); }
	}

	/* Fade in */
	@keyframes fi-fade-up{
		to { opacity: 1; transform: translate3d(0,0,0); }
	}

	/* Rotate */
	@keyframes fi-rotate{
		to { transform: rotate(360deg); }
	}

	/* Moving dots along paths (modern browsers) */
	@supports (offset-path: path("M0,0 L1,1")) {
		.fi-dot{ offset-rotate: 0deg; animation: fi-dot-move 3.2s linear infinite; }

		.fi-dot-l1{ offset-path: path("M250 58 Q320 58, 360 100 T398 155"); offset-distance: 10%; }
		.fi-dot-l2{ offset-path: path("M250 194 Q320 194, 360 190 T398 185"); offset-distance: 45%; animation-delay: -1.1s; }

		.fi-dot-r1{ offset-path: path("M562 155 Q600 120, 650 80 T710 58"); offset-distance: 25%; animation-delay: -0.6s; }
		.fi-dot-r2{ offset-path: path("M562 205 Q600 240, 650 255 T710 262"); offset-distance: 55%; animation-delay: -1.7s; }

		@keyframes fi-dot-move{
			to { offset-distance: 100%; }
		}
	}

	/* Accessibility: reduce motion */
	@media (prefers-reduced-motion: reduce){
		.fi-fade-up,
		.fi-float,
		.fi-float-delayed,
		.fi-conn,
		.fi-pulse,
		.fi-orbit,
		.fi-dot{
			animation: none !important;
			transform: none !important;
			opacity: 1 !important;
		}
	}
</style>
